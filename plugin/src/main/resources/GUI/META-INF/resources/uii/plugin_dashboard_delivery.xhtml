<ui:composition
    xmlns="http://www.w3.org/1999/xhtml"
    xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
    xmlns:composite="http://xmlns.jcp.org/jsf/composite"
    xmlns:h="http://xmlns.jcp.org/jsf/html"
    xmlns:f="http://xmlns.jcp.org/jsf/core"
    xmlns:x="http://myfaces.apache.org/tomahawk"
    xmlns:intranda="http://xmlns.jcp.org/jsf/composite/composites"
    xmlns:pt="http://xmlns.jcp.org/jsf/passthrough"
    xmlns:p="http://primefaces.org/ui"
    xmlns:jsf="http://xmlns.jcp.org/jsf"
    xmlns:zlb="http://xmlns.jcp.org/jsf/composite/composites"
    template="/uii/template/reduced_content_template.html">
    <composite:interface>



    </composite:interface>

    <ui:define name="content">

	<!-- Custom styles -->
	<link
		type="text/css"
		rel="stylesheet"
		href="#{HelperForm.applicationWebsiteUrl}/uii/css/styles.css" />

    <!-- breadcrumb area -->
    <ui:define name="breadcrumb">
        <intranda:breadcrumb
            id="index"
            label="#{DashboardForm.plugin==null?msgs.startseite:msgs.dashboard}"
            action="external_index"
            navId="a0"
            noSeparator="#{true}" />
    </ui:define>



        <h:panelGroup
            layout="block"
            id="main-area"
            class="deliveryPlugin flow"
            >
            <!-- main area, select document type -->
            <ui:fragment rendered="#{DashboardForm.plugin.navigation=='main'}">

				<div class="text-important">
					<h:outputFormat value="#{msgs['plugin_dashboard_deliveryWellcomeMessage']}">
						<f:param value="#{LoginForm.myBenutzer.vorname} #{LoginForm.myBenutzer.nachname}" />
					</h:outputFormat>
				</div>

                <h:form>
                    <div class="common-region">

                        <!-- Journals -->
                        <div class="item flow">

							<div class="item__icons">
								<ui:include src="/uii/includes/icon-book.xhtml" />
								<ui:include src="/uii/includes/icon-book.xhtml" />
								<ui:include src="/uii/includes/icon-book.xhtml" />
                        	</div>

							<h2 class="item__heading">#{msgs.plugin_dashboard_deliverJournalsHeader}</h2>
							<p class="item__text">#{msgs.plugin_dashboard_deliverJournals}</p>

                            <button
                                jsf:id="journals"
                                class="item__cta btn btn-primary-400"
                                title="#{msgs.plugin_dashboard_deliverJournalsButton}">
                                <h:outputText value="#{msgs.plugin_dashboard_deliverJournalsButton}" />
                                <f:setPropertyActionListener
                                    value="titleSelection"
                                    target="#{DashboardForm.plugin.navigation}" />
                                <f:setPropertyActionListener
                                    value="journal"
                                    target="#{DashboardForm.plugin.documentType}" />
                                <f:ajax
                                    render="main-area"
                                    execute="@this" />
                            </button>
                        </div>

                        <!-- Monographs -->
                        <div class="item flow">

							<div class="item__icons">
								<ui:include src="/uii/includes/icon-book.xhtml" />
                        	</div>
                        
							<h2 class="item__heading">#{msgs.plugin_dashboard_deliverMonographHeader}</h2>
							<p class="item__text">#{msgs.plugin_dashboard_deliverMonograph}</p>

                            <button
                                jsf:id="monograph"
                                class="item__cta btn btn-primary-400"
                                title="#{msgs.plugin_dashboard_deliverMonographButton}"
                                jsf:action="#{DashboardForm.plugin.startNewImport}">
                                <h:outputText value="#{msgs.plugin_dashboard_deliverMonographButton}" />
                                <f:setPropertyActionListener
                                    value="upload"
                                    target="#{DashboardForm.plugin.navigation}" />
                                <f:setPropertyActionListener
                                    value="monograph"
                                    target="#{DashboardForm.plugin.documentType}" />
                                <f:ajax
                                    render="main-area"
                                    execute="@this" />
                            </button>
                        </div>


                        <!-- Help -->
                        <div class="item flow">
							<div class="item__icons">
								<ui:include src="/uii/includes/icon-mortarboard.xhtml" />
							</div>

							<h2 class="item__heading">#{msgs.plugin_dashboard_deliverHelpHeader}</h2>
							<p class="item__text">#{msgs.plugin_dashboard_deliverHelp}</p>

                            <button class="item__cta btn btn-primary-400">
                                <h:outputText value="#{msgs.plugin_dashboard_deliverHelpButton}" />
                            </button>

                        </div>


                        <!-- edit user data -->
                        <div class="item flow">
							<div class="item__icons">
								<ui:include src="/uii/includes/icon-file-text.xhtml" />
							</div>
							
							<h2 class="item__heading">#{msgs.plugin_dashboard_deliverShowDataHeader}</h2>
							<p class="item__text">#{msgs.plugin_dashboard_deliverShowData}</p>

                            <button
                                jsf:id="userData"
                                class="item__cta btn btn-primary-400"
                                title="#{msgs.plugin_dashboard_deliverShowDataButton}"
                                jsf:action="#{DashboardForm.plugin.readUserConfiguration}">
                                <h:outputText value="#{msgs.plugin_dashboard_deliverShowDataButton}" />
                                <f:setPropertyActionListener
                                    value="userdata"
                                    target="#{DashboardForm.plugin.navigation}" />
                                <f:ajax
                                    render="main-area"
                                    execute="@this" />
                            </button>
                        </div>

                        <!-- show existing deliveries -->
                        <div class="item flow">
							<div class="item__icons">
								<ui:include src="/uii/includes/icon-file-text.xhtml" />
							</div>

							<h2 class="item__heading">#{msgs.plugin_dashboard_deliverShowExistingDataHeader}</h2>
							<p class="item__text">#{msgs.plugin_dashboard_deliverShowExistingData}</p>

                            <button
                                jsf:id="existingData"
                                class="item__cta btn btn-primary-400"
                                title="#{msgs.plugin_dashboard_deliverShowExistingDataButton}"
                                jsf:action="#{DashboardForm.plugin.getExistingDataForInstitution}">
                                <h:outputText value="#{msgs.plugin_dashboard_deliverShowExistingDataButton}" />
                                <f:setPropertyActionListener
                                    value="existingData"
                                    target="#{DashboardForm.plugin.navigation}" />
                                <f:ajax
                                    render="main-area"
                                    execute="@this" />
                            </button>
                        </div>
                    </div>

                </h:form>
            </ui:fragment>


            <ui:fragment rendered="#{DashboardForm.plugin.navigation=='upload'}">
            	
            	<h2>#{msgs.plugin_dashboard_uploadFormHeader}</h2>

                <h:form
                    prependId="false"
                    id="uploadForm"
                    class="form flow"
                    enctype="multipart/form-data">

					<div class="form__icons">
						<ui:include src="/uii/includes/icon-file-image.xhtml" />
					</div>

					<p class="form__msg">#{msgs.plugin_dashboard_uploadFormMessage}</p>

					<div class="form__msg-or">
						#{msgs.plugin_dashboard_or}
					</div>

					<div class="form__actions">
					
                    <h:inputFile
                        id="file"
                    	styleClass="form-control form-control-lg"
                        value="#{DashboardForm.plugin.file}"
                        name="file" />
                    <h:commandButton
                        id="submit"
                        value="submit" 
                        styleClass="btn btn-primary-400"
                        />
					</div>


                </h:form>

                <!-- TODO input field for download url -->

            </ui:fragment>

            <ui:fragment
                id="monographs"
                rendered="#{DashboardForm.plugin.documentType == 'monograph'}">
                <div class="container">
                    <ui:include src="include_monographs.xhtml" />
                </div>
            </ui:fragment>


            <ui:fragment
                id="journals"
                rendered="#{DashboardForm.plugin.documentType == 'journal'}">
                <div class="container">
                    <ui:include src="include_journals.xhtml" />
                </div>
            </ui:fragment>

            <ui:fragment rendered="#{DashboardForm.plugin.navigation=='userdata' or DashboardForm.plugin.navigation=='user' or DashboardForm.plugin.navigation=='institution'or DashboardForm.plugin.navigation=='contact'}">
                <div class="container">
                    <ui:include src="include_userdata.xhtml" />
                </div>
            </ui:fragment>

            <ui:fragment
                id="data"
                rendered="#{DashboardForm.plugin.navigation=='existingData'}">
                <div class="container">
                    <ui:include src="include_existingData.xhtml" />
                </div>
            </ui:fragment>

        </h:panelGroup>
    </ui:define>
</ui:composition>