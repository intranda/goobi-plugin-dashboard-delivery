<ui:composition
    xmlns="http://www.w3.org/1999/xhtml"
    xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
    xmlns:composite="http://xmlns.jcp.org/jsf/composite"
    xmlns:h="http://xmlns.jcp.org/jsf/html"
    xmlns:f="http://xmlns.jcp.org/jsf/core"
    xmlns:x="http://myfaces.apache.org/tomahawk"
    xmlns:intranda="http://xmlns.jcp.org/jsf/composite/composites"
    xmlns:pt="http://xmlns.jcp.org/jsf/passthrough"
    xmlns:p="http://primefaces.org/ui"
    xmlns:jsf="http://xmlns.jcp.org/jsf"
    xmlns:zlb="http://xmlns.jcp.org/jsf/composite/composites"
    template="/uii/template/reduced_content_template.html">
    <composite:interface>



    </composite:interface>

    <!-- breadcrumb area -->
    <ui:define name="breadcrumb">
        <intranda:breadcrumb
            id="index"
            label="#{DashboardForm.plugin==null?msgs.startseite:msgs.dashboard}"
            action="external_index"
            navId="a0"
            noSeparator="#{true}" />
    </ui:define>


    <ui:define name="content">

        <style>
.area {
    display: grid;
    grid-template-columns: 20% 20% 20%;
    grid-column-gap: 50px;
    justify-content: space-evenly;
}

.item {
    width: 100%;
    height: 200px;
    background: #eee;
}

.header {
    color: #6e1769;
}

.statuslist {
    list-style: none;
}

.statuslist li {
    float: left;
    margin: 10px;
}

.status.active {
    color: yellow;
}

.status.inactive {
    color: grey;
}

.status.finished {
    color: green;
}

.layout {
    grid-template-columns: 45% 45%;
}

.grid-row {
    grid-column-start: span 2;
}

.persongrid {
    display: grid;
    gap: var(- -gap);
    grid-template-columns: 30% 30% 30%;
}

.corporategrid {
    display: grid;
    gap: var(- -gap);
    grid-template-columns: 45% 45%;
}
</style>

        <h:panelGroup
            layout="block"
            id="main-area">
            <!-- main area, select document type -->
            <ui:fragment rendered="#{DashboardForm.plugin.navigation=='main'}">
                <h:outputFormat value="#{msgs['plugin_dashboard_deliveryWellcomeMessage']}">
                    <f:param value="#{LoginForm.myBenutzer.vorname} #{LoginForm.myBenutzer.nachname}" />
                </h:outputFormat>
                <h:form>
                    <div class="area">
                        <!-- Journals -->
                        <div class="item">

                            <h:outputText
                                styleClass="header"
                                value="#{msgs.plugin_dashboard_deliverJournalsHeader}" />
                            <br />

                            <h:outputText value="#{msgs.plugin_dashboard_deliverJournals}" />


                            <button
                                jsf:id="journals"
                                class="btn btn-primary-400"
                                title="#{msgs.plugin_dashboard_deliverJournalsButton}">
                                <h:outputText value="#{msgs.plugin_dashboard_deliverJournalsButton}" />
                                <f:setPropertyActionListener
                                    value="upload"
                                    target="#{DashboardForm.plugin.navigation}" />
                                <f:setPropertyActionListener
                                    value="journal"
                                    target="#{DashboardForm.plugin.documentType}" />
                                <f:ajax
                                    render="main-area"
                                    execute="@this" />
                            </button>

                        </div>


                        <!-- Monographs -->
                        <div class="item">
                            <h:outputText
                                styleClass="header"
                                value="#{msgs.plugin_dashboard_deliverMonographHeader}" />
                            <br />
                            <h:outputText value="#{msgs.plugin_dashboard_deliverMonograph}" />
                            <button
                                jsf:id="monograph"
                                class="btn btn-primary-400"
                                title="#{msgs.plugin_dashboard_deliverMonographButton}">
                                <h:outputText value="#{msgs.plugin_dashboard_deliverMonographButton}" />
                                <f:setPropertyActionListener
                                    value="upload"
                                    target="#{DashboardForm.plugin.navigation}" />
                                <f:setPropertyActionListener
                                    value="monograph"
                                    target="#{DashboardForm.plugin.documentType}" />
                                <f:ajax
                                    render="main-area"
                                    execute="@this" />
                            </button>
                        </div>


                        <!-- Help -->
                        <div class="item">
                            <h:outputText
                                styleClass="header"
                                value="#{msgs.plugin_dashboard_deliverHelpHeader}" />
                            <br />
                            <h:outputText value="#{msgs.plugin_dashboard_deliverHelp}" />
                            <button class="btn btn-primary-400">
                                <h:outputText value="#{msgs.plugin_dashboard_deliverHelpButton}" />
                            </button>

                        </div>
                    </div>

                </h:form>
            </ui:fragment>


            <ui:fragment rendered="#{DashboardForm.plugin.navigation=='upload'}">

                <h:form
                    prependId="false"
                    id="uploadForm"
                    enctype="multipart/form-data">
                    <h:inputFile
                        id="file"
                        value="#{DashboardForm.plugin.file}"
                        name="file" />
                    <h:commandButton
                        id="submit"
                        value="submit" />
                </h:form>
                
                <!-- TODO input field for download url -->
                
            </ui:fragment>
            



            <ui:fragment rendered="#{DashboardForm.plugin.navigation=='data1'}">
                <h:form styleClass="form-validate layout">

                    <ui:repeat
                        var="group"
                        value="#{DashboardForm.plugin.configuredGroups}">
                        <ui:fragment rendered="#{group.pageName==DashboardForm.plugin.navigation and group.documentType == DashboardForm.plugin.documentType}">
                            <h2>
                                <h:outputText value="#{group.label}" />
                            </h2>

                            <ui:repeat
                                var="field"
                                value="#{group.fields}"
                                varStatus="status">

                                <ui:fragment rendered="#{field.displayType == 'person'}">
                                    <zlb:person
                                        identifier="field_#{status.index}"
                                        labelText="#{field.label}"
                                        labelHelpText="{field.helpMessage}"
                                        value="#{field.value}"
                                        required="#{field.required}"
                                        subValue="#{field.value2}"
                                        role="#{field.role}"
                                        showErrorMessage="#{field.validationError}"
                                        errorMessageText="#{field.validationErrorMessage}"
                                        selectItems="#{field.selectList}"
                                        subClass="persongrid"
                                        fieldName="#{field.label}" />
                                </ui:fragment>

                                <ui:fragment rendered="#{field.displayType == 'corporate'}">
                                    <zlb:corporate
                                        identifier="field_#{status.index}"
                                        labelText="#{field.label}"
                                        labelHelpText="{field.helpMessage}"
                                        value="#{field.value}"
                                        required="#{field.required}"
                                        role="#{field.role}"
                                        showErrorMessage="#{field.validationError}"
                                        errorMessageText="#{field.validationErrorMessage}"
                                        selectItems="#{field.selectList}"
                                        subClass="corporategrid" />
                                </ui:fragment>
                                
                                <ui:fragment rendered="#{field.displayType == 'picklist'}">
                                    <zlb:corporate
                                        identifier="field_#{status.index}"
                                        labelText="#{field.label}"
                                        labelHelpText="{field.helpMessage}"
                                        value="#{field.value}"
                                        required="#{field.required}"
                                        role="#{field.role}"
                                        showErrorMessage="#{field.validationError}"
                                        errorMessageText="#{field.validationErrorMessage}"
                                        selectItems="#{field.selectList}"
                                        subClass="corporategrid" />
                                </ui:fragment>
                                

                                <ui:fragment rendered="#{field.displayType != 'person' and field.displayType != 'corporate'and field.displayType != 'picklist'}">
                                    <zlb:field
                                        identifier="field_#{status.index}"
                                        labelText="#{field.label}"
                                        labelHelpText="{field.helpMessage}"
                                        required="#{field.required}"
                                        value="#{field.value}"
                                        fieldType="#{field.displayType}"
                                        showErrorMessage="#{field.validationError}"
                                        errorMessageText="#{field.validationErrorMessage}"
                                        selectItems="#{field.selectList}"
                                        booleanValue="#{field.booleanValue}"
                                        subValue="#{field.value2}" />
                                </ui:fragment>
<!--                                 <h:panelGroup rendered="#{field.cardinality == '+' or field.cardinality == '*'}"> -->
<!--                                     <button -->
<!--                                         jsf:id="button" -->
<!--                                         jsf:action="#{DashboardForm.plugin.duplicateMetadataField}"> -->
<!--                                         <i class="fa fa-plus" /> -->
<!--                                         <f:setPropertyActionListener -->
<!--                                             value="#{field}" -->
<!--                                             target="#{DashboardForm.plugin.currentField}" /> -->
<!--                                     </button> -->
<!--                                 </h:panelGroup> -->
                            </ui:repeat>
                        </ui:fragment>
                    </ui:repeat>


                </h:form>

            </ui:fragment>


<ui:fragment rendered="#{DashboardForm.plugin.navigation=='data2'}">
                <h:form styleClass="form-validate layout">

                    <ui:repeat
                        var="group"
                        value="#{DashboardForm.plugin.configuredGroups}">
                        <ui:fragment rendered="#{group.pageName==DashboardForm.plugin.navigation and group.documentType == DashboardForm.plugin.documentType}">
                            <h2>
                                <h:outputText value="#{group.label}" />
                            </h2>

                            <ui:repeat
                                var="field"
                                value="#{group.fields}"
                                varStatus="status">

                                <ui:fragment rendered="#{field.displayType == 'person'}">
                                    <zlb:person
                                        identifier="field_#{status.index}"
                                        labelText="#{field.label}"
                                        labelHelpText="{field.helpMessage}"
                                        value="#{field.value}"
                                        required="#{field.required}"
                                        subValue="#{field.value2}"
                                        role="#{field.role}"
                                        showErrorMessage="#{field.validationError}"
                                        errorMessageText="#{field.validationErrorMessage}"
                                        selectItems="#{field.selectList}"
                                        subClass="persongrid"
                                        fieldName="#{field.label}" />
                                </ui:fragment>

                                <ui:fragment rendered="#{field.displayType == 'corporate'}">
                                    <zlb:corporate
                                        identifier="field_#{status.index}"
                                        labelText="#{field.label}"
                                        labelHelpText="{field.helpMessage}"
                                        value="#{field.value}"
                                        required="#{field.required}"
                                        role="#{field.role}"
                                        showErrorMessage="#{field.validationError}"
                                        errorMessageText="#{field.validationErrorMessage}"
                                        selectItems="#{field.selectList}"
                                        subClass="corporategrid" />
                                </ui:fragment>
                                
                                <ui:fragment rendered="#{field.displayType == 'picklist'}">
                                    <zlb:corporate
                                        identifier="field_#{status.index}"
                                        labelText="#{field.label}"
                                        labelHelpText="{field.helpMessage}"
                                        value="#{field.value}"
                                        required="#{field.required}"
                                        role="#{field.role}"
                                        showErrorMessage="#{field.validationError}"
                                        errorMessageText="#{field.validationErrorMessage}"
                                        selectItems="#{field.selectList}"
                                        subClass="corporategrid" />
                                </ui:fragment>
                                

                                <ui:fragment rendered="#{field.displayType != 'person' and field.displayType != 'corporate'and field.displayType != 'picklist'}">
                                    <zlb:field
                                        identifier="field_#{status.index}"
                                        labelText="#{field.label}"
                                        labelHelpText="{field.helpMessage}"
                                        required="#{field.required}"
                                        value="#{field.value}"
                                        fieldType="#{field.displayType}"
                                        showErrorMessage="#{field.validationError}"
                                        errorMessageText="#{field.validationErrorMessage}"
                                        selectItems="#{field.selectList}"
                                        booleanValue="#{field.booleanValue}"
                                        subValue="#{field.value2}" />
                                </ui:fragment>
<!--                                 <h:panelGroup rendered="#{field.cardinality == '+' or field.cardinality == '*'}"> -->
<!--                                     <button -->
<!--                                         jsf:id="button" -->
<!--                                         jsf:action="#{DashboardForm.plugin.duplicateMetadataField}"> -->
<!--                                         <i class="fa fa-plus" /> -->
<!--                                         <f:setPropertyActionListener -->
<!--                                             value="#{field}" -->
<!--                                             target="#{DashboardForm.plugin.currentField}" /> -->
<!--                                     </button> -->
<!--                                 </h:panelGroup> -->
                            </ui:repeat>
                        </ui:fragment>
                    </ui:repeat>


                </h:form>

            </ui:fragment>
            
            <ui:fragment rendered="#{DashboardForm.plugin.navigation=='data3'}">
                <h:form styleClass="form-validate layout">

                    <ui:repeat
                        var="group"
                        value="#{DashboardForm.plugin.configuredGroups}">
                        <ui:fragment rendered="#{group.pageName==DashboardForm.plugin.navigation and group.documentType == DashboardForm.plugin.documentType}">
                            <h2>
                                <h:outputText value="#{group.label}" />
                            </h2>

                            <ui:repeat
                                var="field"
                                value="#{group.fields}"
                                varStatus="status">

                                <ui:fragment rendered="#{field.displayType == 'person'}">
                                    <zlb:person
                                        identifier="field_#{status.index}"
                                        labelText="#{field.label}"
                                        labelHelpText="{field.helpMessage}"
                                        value="#{field.value}"
                                        required="#{field.required}"
                                        subValue="#{field.value2}"
                                        role="#{field.role}"
                                        showErrorMessage="#{field.validationError}"
                                        errorMessageText="#{field.validationErrorMessage}"
                                        selectItems="#{field.selectList}"
                                        subClass="persongrid"
                                        fieldName="#{field.label}" />
                                </ui:fragment>

                                <ui:fragment rendered="#{field.displayType == 'corporate'}">
                                    <zlb:corporate
                                        identifier="field_#{status.index}"
                                        labelText="#{field.label}"
                                        labelHelpText="{field.helpMessage}"
                                        value="#{field.value}"
                                        required="#{field.required}"
                                        role="#{field.role}"
                                        showErrorMessage="#{field.validationError}"
                                        errorMessageText="#{field.validationErrorMessage}"
                                        selectItems="#{field.selectList}"
                                        subClass="corporategrid" />
                                </ui:fragment>
                                
                                <ui:fragment rendered="#{field.displayType == 'picklist'}">
                                    <zlb:corporate
                                        identifier="field_#{status.index}"
                                        labelText="#{field.label}"
                                        labelHelpText="{field.helpMessage}"
                                        value="#{field.value}"
                                        required="#{field.required}"
                                        role="#{field.role}"
                                        showErrorMessage="#{field.validationError}"
                                        errorMessageText="#{field.validationErrorMessage}"
                                        selectItems="#{field.selectList}"
                                        subClass="corporategrid" />
                                </ui:fragment>
                                

                                <ui:fragment rendered="#{field.displayType != 'person' and field.displayType != 'corporate'and field.displayType != 'picklist'}">
                                    <zlb:field
                                        identifier="field_#{status.index}"
                                        labelText="#{field.label}"
                                        labelHelpText="{field.helpMessage}"
                                        required="#{field.required}"
                                        value="#{field.value}"
                                        fieldType="#{field.displayType}"
                                        showErrorMessage="#{field.validationError}"
                                        errorMessageText="#{field.validationErrorMessage}"
                                        selectItems="#{field.selectList}"
                                        booleanValue="#{field.booleanValue}"
                                        subValue="#{field.value2}" />
                                </ui:fragment>
<!--                                 <h:panelGroup rendered="#{field.cardinality == '+' or field.cardinality == '*'}"> -->
<!--                                     <button -->
<!--                                         jsf:id="button" -->
<!--                                         jsf:action="#{DashboardForm.plugin.duplicateMetadataField}"> -->
<!--                                         <i class="fa fa-plus" /> -->
<!--                                         <f:setPropertyActionListener -->
<!--                                             value="#{field}" -->
<!--                                             target="#{DashboardForm.plugin.currentField}" /> -->
<!--                                     </button> -->
<!--                                 </h:panelGroup> -->
                            </ui:repeat>
                        </ui:fragment>
                    </ui:repeat>


                </h:form>

            </ui:fragment>


            <ui:fragment rendered="#{DashboardForm.plugin.navigation!='main'}">
                <h:form id="navigationForm">
                    <div class="submit">
                        <ul class="statuslist">
                            <li>
                                <button
                                    jsf:action="#{DashboardForm.plugin.previousPage}"
                                    jsf:id="backToMain"
                                    class="float-left btn btn-primary font-size-s">
                                    <h:outputText value="#{msgs.back}" />
                                    <f:ajax
                                        render="main-area"
                                        execute="@this" />
                                </button>

                            </li>
                            <li>

                                <h:panelGroup styleClass="status #{DashboardForm.plugin.navigation=='upload'?'active':'finished'} ">
                                    <h:outputText value="#{msgs.plugin_dashboard_delivery_upload}" />
                                </h:panelGroup>
                            </li>
                            <li>
                                <h:panelGroup styleClass="status #{DashboardForm.plugin.navigation=='data1' ? 'active': DashboardForm.plugin.navigation=='upload' ? 'inactive': 'finished'}">
                                    <h:outputText value="#{msgs.plugin_dashboard_delivery_data1}" />
                                </h:panelGroup>
                            </li>
                            <li>
                                <h:panelGroup styleClass="status #{DashboardForm.plugin.navigation=='data2' ? 'active': DashboardForm.plugin.navigation=='upload' or DashboardForm.plugin.navigation=='data1' ? 'inactive': 'finished'}">
                                    <h:outputText value="#{msgs.plugin_dashboard_delivery_data2}" />
                                </h:panelGroup>
                            </li>

                            <li>
                                <h:panelGroup styleClass="status #{DashboardForm.plugin.navigation=='data3' ? 'active': DashboardForm.plugin.navigation=='upload' or DashboardForm.plugin.navigation=='data1' or DashboardForm.plugin.navigation=='data2' ? 'inactive': 'finished'}">
                                    <h:outputText value="#{msgs.plugin_dashboard_delivery_data3}" />
                                </h:panelGroup>
                            </li>
                            <li>
                                <h:panelGroup styleClass="status #{DashboardForm.plugin.navigation=='overview' ? 'active': DashboardForm.plugin.navigation=='finish' ? 'finished': 'inactive'}">
                                    <h:outputText value="#{msgs.plugin_dashboard_delivery_overview}" />
                                </h:panelGroup>

                            </li>
                            <li>
                                <h:panelGroup styleClass="status #{DashboardForm.plugin.navigation=='finish' ? 'active': 'inactive'}">
                                    <h:outputText value="#{msgs.plugin_dashboard_delivery_finish}" />
                                </h:panelGroup>
                            </li>
                            <li>
                                <button
                                    jsf:action="#{DashboardForm.plugin.nextPage}"
                                    jsf:id="nextStep"
                                    class="float-left btn btn-primary font-size-s">
                                    <h:outputText value="#{msgs.next}" />
                                    <f:ajax
                                        render="main-area"
                                        execute="@this" />
                                </button>
                            </li>
                        </ul>
                    </div>

                </h:form>

            </ui:fragment>


        </h:panelGroup>
    </ui:define>
</ui:composition>